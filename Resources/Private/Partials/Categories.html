<html
    lang="en"
    xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    data-namespace-typo3-fluid="true"
>
    <f:if condition="{partner.attributes}">
        <f:then>
            <f:variable name="cateoriesByType" value="{partner.attributes.allCategoriesByType}" />
        </f:then>
        <f:else>
            <f:variable name="cateoriesByType" value="{partner.categories.allCategoriesByType}" />
        </f:else>
    </f:if>
    <f:for each="{cateoriesByType}" key="type" as="categories">
        <f:if condition="{categories}">
                <p>
                    <strong>
                        <core:icon identifier="category_types.partners.{type}"/>
                        {f:translate(
                            key: 'sys_category.academic_partners.{type}',
                            extensionName: 'academic_partners'
                        )}:
                    </strong>
                    <f:for each="{categories}" as="category" iteration="categoryIterator">
                        {category.title}{f:if(condition: '{categoryIterator.isLast} == false', then: ',')}
                    </f:for>
                </p>
        </f:if>
    </f:for>
</html>
